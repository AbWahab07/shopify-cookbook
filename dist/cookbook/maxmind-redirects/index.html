<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Maxmind redirects - shopify cookbook</title><meta property=og:title content="Maxmind redirects"><meta name=description content="Using the below js format (simplified from maxminds sample here: http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/) to look for the region codes and then redirect to a specific url separately"><meta property=og:description content="Using the below js format (simplified from maxminds sample here: http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/) to look for the region codes and then redirect to a specific url separately"><link rel=canonical href=http://the-working-party.github.io/shopify-cookbook/cookbook/maxmind-redirects/ ><meta property=og:url content=http://the-working-party.github.io/shopify-cookbook/cookbook/maxmind-redirects/ ><meta property=og:site_name content="shopify cookbook"><meta property=og:type content=article><meta property=article:published_time content=2016-12-20T17:51:16+11:00><script type=application/ld+json>{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Maxmind redirects",
"datePublished": "2016-12-20T17:51:16+11:00",
"description": "Using the below js format (simplified from maxminds sample here: http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/) to look for the region codes and then redirect to a specific url separately",
"url": "http://the-working-party.github.io/shopify-cookbook/cookbook/maxmind-redirects/"}</script><link rel=stylesheet href=/assets/stylesheets/style-7d567c9f43.min.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/assets/favicon.ico><link type=application/atom+xml rel=alternate href=http://the-working-party.github.io/shopify-cookbook/feed.xml title="shopify cookbook"></head><body><header class=site-header><div class=wrapper><div class=flex><div class=site-title><a href=/ >shopify cookbook</a><p>A collection of recipes for working with Shopify in teams.</p></div><nav class=site-nav><a href=# class=menu-icon><svg viewBox="0 0 18 15"><path fill=#424242 d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/><path fill=#424242 d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/><path fill=#424242 d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/></svg></a><div class=trigger><a class=page-link href=/about/ >More info</a> <a class=page-link href=/ ></a> <a class=page-link href=/feed.xml></a> <a class=page-link href=/feed.xslt.xml></a></div></nav></div></div></header><div class=page-content><div class=wrapper><article class=post itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline"></h1><p class=post-meta></p></header><div class=post-content itemprop=articleBody><h1>Redirect Users to a Country-Specific Site using Maxmind</h1><p>Using the below js format (simplified from maxminds sample here: <a href=http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/ >http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/</a>) to look for the region codes and then redirect to a specific url separately - reasons: * GB was the region code for the UK - but wasn&rsquo;t part of the url * despite maxminds claim to capture EU as a continent this wasn&rsquo;t redirecting - therefore all country codes need to be listed for Europe.</p><div class=highlight><pre><code class=language- data-lang="">&lt;script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"&gt;&lt;/script&gt;


&lt;script language="JavaScript"&gt;

document.addEventListener("DOMContentLoaded", function(event) { 

    geoip2.country(
        function (response) {
            if (response.country.iso_code == "AU") {
                window.location = "https://au.kirstinash.com"
            }

            else if (response.country.iso_code == "EU" || "AD" || "AL" || "AT" || "BA" || "BE" || "BG" || "BY" || "CH" || "CS" || "CZ" || "DE" || "DK" || "EE" || "ES" || "FI" || "FO" || "FR" || "FX" || "GI" || "GR" || "HR" || "HU" || "IE" || "IS" || "IT" || "LI" || "LT" || "LU" || "LV" || "MC" || "MD" || "MK" || "MT" || "NL" || "NO" || "PL" || "PT" || "RO" || "SE" || "SI" || "SJ" || "SK" || "SM" || "UA" || "VA") {
                window.location = "https://eu.kirstinash.com"
            }

            else if (response.country.iso_code == "NZ") {
                window.location = "https://nz.kirstinash.com"
            }

            else if (response.country.iso_code == "GB") {
                window.location = "https://uk.kirstinash.com"
            }

            else if (response.country.iso_code == "US") {
                window.location = "https://us.kirstinash.com"
            }

            else {
                window.location = "https://au.kirstinash.com"
            }
        }
    );
});
&lt;/script&gt;
</code></pre></div><h3>VPN testing:</h3><p>The maxmind API uses IP rather than geolocation coordinates - so a VPN is needed for tests rather than the chrome dev Sensor tool.</p><h5>js guides:</h5><p><a href=http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/ >http://dev.maxmind.com/geoip/geoip2/javascript/tutorial/</a></p><h5>EU country codes:</h5><p><a href=http://dev.maxmind.com/geoip/legacy/codes/eu_country_list/ >http://dev.maxmind.com/geoip/legacy/codes/eu_country_list/</a></p></div></article></div></div><footer class=site-footer><div class=wrapper><h2 class=footer-heading>shopify cookbook</h2><div class="footer-col footer-col-2"><ul class=social-media-list></ul></div></div></footer><script src=/assets/javascript/index-f8fab38504.min.js></script></body></html>